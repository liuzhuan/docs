import{_ as s,c as a,o as n,a as l}from"./app.e5c0cc1d.js";const i=JSON.parse('{"title":"D3.js \u4F7F\u7528\u6307\u5357","description":"","frontmatter":{"title":"D3.js \u4F7F\u7528\u6307\u5357"},"headers":[{"level":2,"title":"\u5B89\u88C5","slug":"\u5B89\u88C5","link":"#\u5B89\u88C5","children":[]},{"level":2,"title":"\u52A0\u8F7D\u6570\u636E","slug":"\u52A0\u8F7D\u6570\u636E","link":"#\u52A0\u8F7D\u6570\u636E","children":[]},{"level":2,"title":"\u4FEE\u6539\u5143\u7D20\u5C5E\u6027","slug":"\u4FEE\u6539\u5143\u7D20\u5C5E\u6027","link":"#\u4FEE\u6539\u5143\u7D20\u5C5E\u6027","children":[]},{"level":2,"title":"SVG","slug":"svg","link":"#svg","children":[]},{"level":2,"title":"\u6620\u5C04\u51FD\u6570 scale","slug":"\u6620\u5C04\u51FD\u6570-scale","link":"#\u6620\u5C04\u51FD\u6570-scale","children":[{"level":3,"title":"\u65F6\u95F4\u7C7B scale","slug":"\u65F6\u95F4\u7C7B-scale","link":"#\u65F6\u95F4\u7C7B-scale","children":[]}]},{"level":2,"title":"\u5750\u6807\u8F74 Axis","slug":"\u5750\u6807\u8F74-axis","link":"#\u5750\u6807\u8F74-axis","children":[]},{"level":2,"title":"\u53C2\u8003\u8D44\u6599","slug":"\u53C2\u8003\u8D44\u6599","link":"#\u53C2\u8003\u8D44\u6599","children":[]}],"relativePath":"d3/index.md"}'),p={name:"d3/index.md"},o=l(`<h1 id="d3-js-\u4F7F\u7528\u6307\u5357" tabindex="-1">D3.js \u4F7F\u7528\u6307\u5357 <a class="header-anchor" href="#d3-js-\u4F7F\u7528\u6307\u5357" aria-hidden="true">#</a></h1><p><a href="https://d3js.org" target="_blank" rel="noreferrer">D3.js</a> \u8868\u793A Data-Driven Documents\uFF0C\u5373\u201C\u6570\u636E\u9A71\u52A8\u7684\u6587\u6863\u201D\u3002\u5B83\u7684\u53C2\u8003\u6587\u6863\u5728<a href="https://github.com/d3/d3/wiki" target="_blank" rel="noreferrer">\u8FD9\u91CC</a>\u3002</p><h2 id="\u5B89\u88C5" tabindex="-1">\u5B89\u88C5 <a class="header-anchor" href="#\u5B89\u88C5" aria-hidden="true">#</a></h2><p>\u53EF\u4EE5\u76F4\u63A5\u5728 HTML \u9875\u9762\u4E2D\u5F15\u5165 <code>d3.js</code> \u5E93</p><div class="language-html line-numbers-mode"><button class="copy"></button><span class="lang">html</span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">src</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://cdn.jsdelivr.net/npm/d3@7</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> dataset </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">15</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">d3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">select</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">body</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">selectAll</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">div</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#676E95;">// \u9009\u62E9\u5F85\u7ED1\u5B9A\u6570\u636E\u7684\u5143\u7D20</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">data</span><span style="color:#A6ACCD;">(dataset) </span><span style="color:#676E95;">// \u7ED1\u5B9A\u6570\u636E</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">enter</span><span style="color:#A6ACCD;">() </span><span style="color:#676E95;">// \u9B54\u6CD5\u65B9\u6CD5</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">div</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">attr</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">class</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bar</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">style</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">height</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> d </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">px</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>\u4E5F\u53EF\u4EE5\u4F7F\u7528 npm/pnpm \u5B89\u88C5\u5305\uFF1A</p><div class="language-sh line-numbers-mode"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">$ pnpm add d3</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> d3 </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">d3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">d3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">select</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">body</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">p</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">text</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello D3!</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="\u52A0\u8F7D\u6570\u636E" tabindex="-1">\u52A0\u8F7D\u6570\u636E <a class="header-anchor" href="#\u52A0\u8F7D\u6570\u636E" aria-hidden="true">#</a></h2><p>d3 \u63D0\u4F9B\u4E86 <code>csv()</code> \u548C <code>json()</code> \u51FD\u6570\uFF0C\u5206\u522B\u52A0\u8F7D CSV \u548C JSON \u6570\u636E\u6587\u4EF6\u3002\u53EF\u4EE5\u4F20\u5165\u8F6C\u6362\u51FD\u6570\uFF0C\u5BF9\u539F\u59CB\u6570\u636E\u8FDB\u884C\u8F6C\u6362\u5904\u7406\u3002</p><div class="language-js line-numbers-mode"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> result </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> d3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">csv</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./data/foods.csv</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">food</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> d</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">FOOD</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">price</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">parseFloat</span><span style="color:#A6ACCD;">(d</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">PRICE)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> json </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> d3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">json</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./package.json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><details class="details custom-block"><summary>\u5728\u7EBF\u8F6C\u6362\u5DE5\u5177</summary><p>\u53EF\u4EE5\u4F7F\u7528\u5728\u7EBF\u8F6C\u6362\u5DE5\u5177 <a href="https://shancarter.github.io/mr-data-converter/" target="_blank" rel="noreferrer">Mr. Data Converter</a> \u628A CSV \u7B49\u5404\u79CD\u6570\u636E\u683C\u5F0F\uFF0C\u8F6C\u6362\u4E3A JSON \u7B49\u5176\u4ED6\u7C7B\u578B\u3002</p></details><h2 id="\u4FEE\u6539\u5143\u7D20\u5C5E\u6027" tabindex="-1">\u4FEE\u6539\u5143\u7D20\u5C5E\u6027 <a class="header-anchor" href="#\u4FEE\u6539\u5143\u7D20\u5C5E\u6027" aria-hidden="true">#</a></h2><p>\u4F7F\u7528 <code>attr()</code> \u4FEE\u6539\u5143\u7D20\u5C5E\u6027\uFF0C\u4F7F\u7528 <code>style()</code> \u4FEE\u6539\u5143\u7D20\u6837\u5F0F\u3002</p><div class="language-js line-numbers-mode"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#A6ACCD;">d3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">select</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">div</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">attr</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">class</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bar</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">style</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">color</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">white</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>\u53EF\u4EE5\u4F7F\u7528 <code>classed(clsName, bool)</code> \u589E\u52A0\u548C\u5220\u9664\u7C7B\u540D</p><div class="language-js line-numbers-mode"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#A6ACCD;">d3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">select</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">body</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">div</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">classed</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bar</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="svg" tabindex="-1">SVG <a class="header-anchor" href="#svg" aria-hidden="true">#</a></h2><div class="language-js line-numbers-mode"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#676E95;">// \u751F\u6210 SVG \u5BB9\u5668</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> svg </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> d3</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">select</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">body</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">svg</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">attr</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">width</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">500</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">attr</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">height</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u521B\u5EFA\u5706\u5F62\u5E76\u7ED1\u5B9A\u6570\u636E</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> circles </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> svg</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">selectAll</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">circle</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">data</span><span style="color:#A6ACCD;">(dataset)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">enter</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">circle</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#676E95;">// \u8BBE\u5B9A\u5706\u5F62\u6A2A\u5750\u6807</span></span>
<span class="line"><span style="color:#A6ACCD;">circles</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">attr</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cx</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="\u6620\u5C04\u51FD\u6570-scale" tabindex="-1">\u6620\u5C04\u51FD\u6570 scale <a class="header-anchor" href="#\u6620\u5C04\u51FD\u6570-scale" aria-hidden="true">#</a></h2><p>D3 \u7684 scale \u662F\u4E00\u7C7B\u6620\u5C04\u51FD\u6570\uFF0C\u628A\u8F93\u5165\u503C\u57DF\u7684\u6570\u503C\uFF08<em>input domain</em>\uFF09\u6620\u5C04\u5230\u8F93\u51FA\u8303\u56F4\uFF08<em>output range</em>\uFF09\u3002\u8F93\u51FA\u8303\u56F4\u901A\u5E38\u4EE5\u5C4F\u5E55\u50CF\u7D20\u4E3A\u5355\u4F4D\u3002</p><div class="language-js line-numbers-mode"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#676E95;">// \u521B\u5EFA\u7EBF\u6027 scale</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> scale </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> d3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">scaleLinear</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">domain</span><span style="color:#A6ACCD;">([</span><span style="color:#F78C6C;">100</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">500</span><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">range</span><span style="color:#A6ACCD;">([</span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">350</span><span style="color:#A6ACCD;">])</span></span>
<span class="line"><span style="color:#676E95;">// \u4F7F\u7528\u7EBF\u6027 scale</span></span>
<span class="line"><span style="color:#82AAFF;">scale</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">) </span><span style="color:#676E95;">// =&gt; 10</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u4E3A\u4E86\u83B7\u5F97\u6700\u5927\u503C\u548C\u6700\u5C0F\u503C\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>d3.max(dataset, accessor)</code> \u548C <code>d3.min(dataset, accessor)</code>\u3002</p><div class="language-js line-numbers-mode"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> max </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> d3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">max</span><span style="color:#A6ACCD;">(dataset</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> d[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">])</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> min </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> d3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">min</span><span style="color:#A6ACCD;">(dataset</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> d[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">])</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u9664\u7EBF\u6027 scale \u51FD\u6570\u5916\uFF0C\u8FD8\u6709\u5176\u4ED6\u7C7B\u578B\uFF1A</p><ul><li><code>scaleSqrt</code> \u5E73\u65B9\u6839\u6027</li><li><code>scalePow</code> \u6307\u6570\u6027</li><li><code>scaleLog</code> \u5BF9\u6570\u6027</li><li><code>scaleTime</code> \u65F6\u95F4\u65E5\u671F\u7C7B</li></ul><h3 id="\u65F6\u95F4\u7C7B-scale" tabindex="-1">\u65F6\u95F4\u7C7B scale <a class="header-anchor" href="#\u65F6\u95F4\u7C7B-scale" aria-hidden="true">#</a></h3><p>d3 \u4F7F\u7528\u539F\u751F\u7684 <code>Date</code> \u7C7B\uFF0C\u8868\u793A\u65E5\u671F\u548C\u65F6\u95F4\u3002\u8981\u89E3\u6790\u65F6\u95F4\u5B57\u7B26\u4E32\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>d3.timeParse()</code>\uFF1A</p><div class="language-js line-numbers-mode"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#676E95;">// \u5982\u679C\u89E3\u6790\u7684\u5B57\u7B26\u4E32\u4E3A 2022/09/11\uFF0C\u5373 year/month/date</span></span>
<span class="line"><span style="color:#676E95;">// \u901A\u8FC7\u6307\u5B9A\u65E5\u671F\u5B57\u7B26\u4E32\u6A21\u677F\uFF0C\u521B\u5EFA\u65E5\u671F\u89E3\u6790\u51FD\u6570</span></span>
<span class="line"><span style="color:#676E95;">// %Y \u8868\u793A\u56DB\u4F4D\u5E74\u4EFD %m \u8868\u793A\u6708\u4EFD %d \u8868\u793A\u65E5\u671F</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> parseTime </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> d3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">timeParse</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%Y/%m/%d</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">parseTime</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2022/09/11</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#676E95;">// =&gt; \u8FD4\u56DE\u5BF9\u5E94\u7684 Date \u5B9E\u4F8B</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u521B\u5EFA\u65F6\u95F4\u7C7B scale</p><div class="language-js line-numbers-mode"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> xScale </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> d3</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">scaleTime</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">domain</span><span style="color:#A6ACCD;">([d3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">min</span><span style="color:#A6ACCD;">(dataset</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> d</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Date)</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> d3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">max</span><span style="color:#A6ACCD;">(dataset</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> d</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Date)])</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">range</span><span style="color:#A6ACCD;">([padding</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> w </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> padding])</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u5982\u679C\u8981\u683C\u5F0F\u5316\u5B57\u7B26\u4E32\u7684\u73B0\u5B9E\uFF0C\u4F7F\u7528 <code>d3.timeFormat()</code>:</p><div class="language-js line-numbers-mode"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> formatTime </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> d3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">timeFormat</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%b %e</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="\u5750\u6807\u8F74-axis" tabindex="-1">\u5750\u6807\u8F74 Axis <a class="header-anchor" href="#\u5750\u6807\u8F74-axis" aria-hidden="true">#</a></h2><p>\u5750\u6807\u8F74\u5206\u4E3A\u4E0A\u4E0B\u5DE6\u53F3\u56DB\u79CD\uFF0C\u5206\u522B\u662F <code>d3.axisTop</code>, <code>d3.axisBottom</code>, <code>d3.axisLeft</code>, <code>d3.axisRight</code>\uFF0C\u533A\u522B\u662F\u523B\u5EA6\u7EBF\u548C\u6587\u5B57\u7684\u65B9\u5411\u3002</p><p>\u4F7F\u7528\u5750\u6807\u8F74\u5206\u4E3A\u4E24\u6B65\uFF1A</p><div class="language-js line-numbers-mode"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#676E95;">// \u7B2C\u4E00\u6B65\uFF0C\u8BBE\u7F6E\u5750\u6807\u8F74\u7684\u7F29\u653E\u53C2\u6570</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> xAxis </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> d3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">axisBottom</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">scale</span><span style="color:#A6ACCD;">(xScale)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// \u7B2C\u4E8C\u6B65\uFF0C\u5728 DOM \u4E2D\u7ED8\u5236 SVG \u5143\u7D20</span></span>
<span class="line"><span style="color:#A6ACCD;">svg</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">g</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#A6ACCD;">(xAxis)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u4E4B\u6240\u4EE5\u8981\u653E\u5728 <code>g</code> \u7FA4\u7EC4\u4E2D\uFF0C\u662F\u4E3A\u4E86\u65B9\u4FBF\u7EDF\u4E00\u8C03\u6574\u5750\u6807\u8F74\u7684\u6837\u5F0F\u3002\u4E00\u822C\u5EFA\u8BAE\u7ED9\u5750\u6807\u8F74\u52A0\u4E0A\u7C7B\u540D\uFF1A</p><div class="language-js line-numbers-mode"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#A6ACCD;">svg</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">g</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">attr</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">class</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">axis</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#A6ACCD;">(xAxis)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>\u5750\u6807\u8F74\u4F4D\u7F6E\u5982\u679C\u4E0D\u591F\u7406\u60F3\uFF0C\u53EF\u4EE5\u4F7F\u7528 CSS \u5E73\u79FB\uFF1A</p><div class="language-js line-numbers-mode"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#A6ACCD;">svg</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">g</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">attr</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">class</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">axis</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">attr</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">transform</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">translate(0, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> (h </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> padding) </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">)</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#A6ACCD;">(xAxis)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u4F7F\u7528 <code>ticks(n)</code> \u8BBE\u5B9A\u523B\u5EA6\u4E2A\u6570\uFF0C\u8FD9\u91CC\u7684 <code>n</code> \u4F1A\u88AB d3 \u770B\u4F5C\u4E00\u79CD\u5EFA\u8BAE\uFF0C\u548C\u6700\u7EC8\u7684\u5B9E\u9645\u7ED3\u679C\u4E5F\u8BB8\u6709\u51FA\u5165\u3002</p><div class="language-js line-numbers-mode"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#A6ACCD;">d3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">axisBottom</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">scale</span><span style="color:#A6ACCD;">(xScale)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ticks</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>\u4E5F\u53EF\u4EE5\u4F7F\u7528 <code>tickValues()</code> \u5F3A\u5236\u8BBE\u5B9A\u523B\u5EA6\u6570\u503C\uFF1A</p><div class="language-js line-numbers-mode"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#A6ACCD;">d3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">axisBottom</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">scale</span><span style="color:#A6ACCD;">(xScale)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">tickValues</span><span style="color:#A6ACCD;">([</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">100</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">250</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">600</span><span style="color:#A6ACCD;">])</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="\u53C2\u8003\u8D44\u6599" tabindex="-1">\u53C2\u8003\u8D44\u6599 <a class="header-anchor" href="#\u53C2\u8003\u8D44\u6599" aria-hidden="true">#</a></h2><ol><li><a href="https://alignedleft.com/work/d3-book-2e" target="_blank" rel="noreferrer">Interactive Data Visualization for the Web, 2nd Ed.</a>, by <em>Scott Murray</em> \u3002\u6CE8\u610F\uFF0C\u672C\u4E66 2017 \u5E74 8 \u6708\u51FA\u7248\uFF0C\u57FA\u4E8E D3 4.x\u3002\u4E0E\u5F53\u524D D3 \u7248\u672C\u76F8\u6BD4\uFF0C\u8BED\u6CD5\u4E0A\u6709\u4E9B\u8BB8\u4E0D\u540C\uFF0C\u4F46\u4E0D\u5F71\u54CD\u7406\u89E3 D3 \u6838\u5FC3\u6982\u5FF5\uFF0C\u503C\u5F97\u9605\u8BFB\u3002</li></ol>`,48),e=[o];function c(r,t,D,y,A,F){return n(),a("div",null,e)}const d=s(p,[["render",c]]);export{i as __pageData,d as default};
